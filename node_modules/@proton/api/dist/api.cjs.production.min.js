"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("@proton/js"),r=require("@bloks/constants"),n=require("@proton/hyperion"),a=require("@proton/light-api"),s=require("@bloks/utils"),o=(t=require("cross-fetch"))&&"object"==typeof t&&"default"in t?t.default:t,i=require("bignumber.js"),u=require("@proton/wrap-constants"),c=require("zod"),p=require("@bloks/numbers");function l(){l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=Object.create((e&&e.prototype instanceof h?e:h).prototype),s=new O(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(a,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw s;return{value:void 0,done:!0}}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var i=m(o,r);if(i){if(i===p)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,s),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function h(){}function f(){}function d(){}var v={};i(v,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==e&&r.call(y,a)&&(v=y);var x=d.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){var n;this._invoke=function(a,s){function o(){return new e((function(n,o){!function n(a,s,o,i){var u=c(t[a],t,s);if("throw"!==u.type){var p=u.arg,l=p.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,o,i)}),(function(t){n("throw",t,o,i)})):e.resolve(l).then((function(t){p.value=t,o(p)}),(function(t){return n("throw",t,o,i)}))}i(u.arg)}(a,s,n,o)}))}return n=n?n.then(o,o):o()}}function m(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,m(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=d,i(x,"constructor",d),i(d,"constructor",f),f.displayName=i(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,o,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},b(k.prototype),i(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var o=new k(u(e,r,n,a),s);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(x),i(x,o,"Generator"),i(x,a,(function(){return this})),i(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var i=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(i&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(i){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function h(t,e,r,n,a,s,o){try{var i=t[s](o),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(t){h(s,n,a,o,i,"next",t)}function i(t){h(s,n,a,o,i,"throw",t)}o(void 0)}))}}function d(){return(d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return v(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t){return x.apply(this,arguments)}function x(){return(x=f(l().mark((function t(r){var n,a=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_account(r);case 3:return(n=t.sent).permissions=n.permissions.map((function(t){return t.required_auth.keys=t.required_auth.keys.map((function(t){return-1!==t.key.indexOf(a.constants.KEY_PREFIX)&&(t.key=e.Numeric.convertLegacyPublicKey(t.key,a.constants.KEY_PREFIX)),t})),t})),t.abrupt("return",n);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function b(t,e){return k.apply(this,arguments)}function k(){return(k=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&/(^[a-zA-Z12345.]+$)/.test(e)){t.next=2;break}return t.abrupt("return",[]);case 2:if(0!==e.indexOf(".")){t.next=4;break}return t.abrupt("return",[]);case 4:return t.prev=4,e=e.trim().toLowerCase(),t.next=8,this.rpc.get_table_by_scope({json:!0,code:this.constants.EOSIO,limit:r,lower_bound:e,table:"userres",upper_bound:""+e+(e.length<12?"z".repeat(12-e.length):"")});case 8:return t.abrupt("return",t.sent.rows.map((function(t){return t.scope})));case 13:return t.prev=13,t.t0=t.catch(4),console.log(t.t0),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,this,[[4,13]])})))).apply(this,arguments)}function m(t){return w.apply(this,arguments)}function w(){return(w=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("eos"!==this.constants.CHAIN){t.next=7;break}return t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.ACCOUNT_INFO,scope:this.constants.ACCOUNT_INFO,table:"accounts",table_key:"",key_type:"name",lower_bound:e,index_position:1,limit:1});case 3:return t.abrupt("return",(r=t.sent).rows.length>0&&r.rows[0].account_name===e?r.rows[0]:void 0);case 7:return t.abrupt("return",void 0);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _(t){return O.apply(this,arguments)}function O(){return(O=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.constants.HISTORY_TYPES.includes("hyperion")){t.next=8;break}if(!this.constants.HYPERION_URL){t.next=5;break}return t.abrupt("return",this.hyperion.get_creator(e));case 5:return t.abrupt("return",this.get(s.urlBuilder(this.constants.API_URL,"hyperion",{type:"get_creator",account:e})));case 6:t.next=9;break;case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function S(t){return A.apply(this,arguments)}function A(){return(A=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.lightApi){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.prev=2,t.next=5,this.lightApi.get_account_info(e);case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[2,8]])})))).apply(this,arguments)}function E(t,e,r,n){return I.apply(this,arguments)}function I(){return(I=f(l().mark((function t(e,r,n,a){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a="native"),console.log("Fetching actions from:",a),console.log("Fetch Params:","actionSkip",r,"actionsPerPage",n),t.next=5,this.actionsRpc.history_get_actions(e,r,n);case 5:if(o=t.sent){t.next=8;break}throw new Error("Could not retrieve actions");case 8:if("native"!==a){t.next=10;break}return t.abrupt("return",s.nativeTransformGetActions(o,this.constants));case 10:return t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function T(t,e,r){return N.apply(this,arguments)}function N(){return(N=f(l().mark((function t(e,r,n){var a,s,o,i,u,c,p,h,f,d,v,g,y,x,b,k,m;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0===(s=(a=void 0===n?{}:n).actionsPerPage)?100:s,u=void 0===(i=a.actionSkip)?0:i,p=void 0===(c=a.sortDirection)?"desc":c,f=void 0===(h=a.dfuseCursorStack)?[]:h,d=a.tokenFilter,v=a.actionFilters,g=a.contractFilter,y=a.actionFilter,b=a.end,(x=a.start)||(x=this.constants.CHAIN_START_DATE),console.log(this.constants.HISTORY_TYPES),!r&&this.constants.HISTORY_TYPES.length&&(r=this.constants.HISTORY_TYPES[0]),x&&b?(x=x||this.constants.CHAIN_START_DATE?new Date(x||this.constants.CHAIN_START_DATE).toISOString():void 0,b=new Date(b||new Date).toISOString()):(x=void 0,b=void 0),"dfuse"!==r){t.next=12;break}return m=f.length>0?f[f.length-1]:"",t.next=9,this.getActionsFromDfuse(e,{limit:o,cursor:m,direction:p,query:"",after:x,before:b,tokenFilter:d,actionFilters:v,contractFilter:g,actionFilter:y});case 9:k=t.sent,t.next=21;break;case 12:if("hyperion"!==r){t.next=18;break}return t.next=15,this.getActionsFromHyperion(e,{skip:Math.abs(u)-1,limit:o,sort:p,after:x,before:b,tokenFilter:d,actionFilters:v,contractFilter:g,actionFilter:y});case 15:k=t.sent,t.next=21;break;case 18:return t.next=20,this.getActionsFromNative(e,u,-o,"native");case 20:k=t.sent;case 21:return t.abrupt("return",k);case 22:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function P(t,e){return R.apply(this,arguments)}function R(){return(R=f(l().mark((function t(e,r){var n,a,o,i,u,c,p,h,f,d,v,g,y,x,b,k,m,w,_;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(n=void 0===r?{}:r).before,o=n.after,u=void 0===(i=n.limit)?25:i,c=n.cursor,h=void 0===(p=n.direction)?"desc":p,d=n.actionFilters,v=n.contractFilter,g=n.actionFilter,x=void 0===(y=n.type)?"search_transactions_graphql":y,b=n.query||"(auth:"+e+" OR\n                    receiver:"+e+" OR\n                    data.to:"+e+" OR\n                    data.from:"+e+" OR\n                    data.receiver:"+e+")",(f=n.tokenFilter)&&(k=f.split(" "),b=b+" account:"+k[1]),d&&((m=Object.entries(d).reduce((function(t,e){var r=e[1];return r.isActive?t.concat(r):t}),[])).length&&(-1!==(w=m.map((function(t){return t.dfuseQuery(e)})).join(" OR ")).search("OR")&&(w="("+w+")"),b=b+" "+w),v&&(b=b+" account:"+v),g&&(b=b+" action:"+g)),t.next=6,this.get(s.urlBuilder(this.constants.API_URL,"dfuse",{type:x,q:b,options:Object.assign({},{sort:h,cursor:c,limit:u,withReversible:!0,before:a,after:o,code:1})}));case 6:if(_=t.sent){t.next=9;break}throw new Error("Could not retrieve actions");case 9:return t.abrupt("return",s.dfuseTransformGetActions(_,e,this.constants));case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function L(t,e){return M.apply(this,arguments)}function M(){return(M=f(l().mark((function t(e,r){var n,a,o,i,u,c,p,h,f,d,v,y,x;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(n=void 0===r?{}:r).tokenFilter,o=n.actionFilters,i=n.contractFilter,u=n.actionFilter,c={filter:n.filter,skip:n.skip,limit:n.limit,sort:n.sort,after:n.after,before:n.before},console.log("Fetching actions from Hyperion"),a&&(h=a.split(" "),f=h[1],c.filter=c.filter?c.filter.replace("*",f):f+":*"),o&&(d=Object.entries(o).reduce((function(t,e){var r=e[1];return r.isActive?t.concat(r):t}),[])).length){for(v=g(d);!(y=v()).done;)y.value.hyperionQuery(e,c);console.log(c)}if(i&&(c.filter=c.filter?c.filter.split(",").map((function(t){return i+":"+t.split(":")[1]})).join(","):i+":*"),u&&(c.filter?(x=Array.from(new Set(c.filter.split(",").map((function(t){return t.split(":")[0]})))),c.filter=x.map((function(t){return t+":"+u})).join(",")):c.filter="*:"+u),!this.constants.HYPERION_URL){t.next=13;break}return t.next=10,this.hyperion.get_actions(e,Object.assign({},c));case 10:p=t.sent,t.next=16;break;case 13:return t.next=15,this.get(s.urlBuilder(this.constants.API_URL,"hyperion",{type:"get_actions",account:e,options:Object.assign({},c)}));case 15:p=t.sent;case 16:if(p){t.next=18;break}throw new Error("Could not retrieve actions");case 18:return t.abrupt("return",s.hyperionTransformGetActions(p));case 19:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function C(){return F.apply(this,arguments)}function F(){return(F=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:1,scope:"......2ke1.o4",table:"statext"});case 3:if((e=t.sent)&&e.rows&&e.rows.length){t.next=8;break}return t.abrupt("return",{});case 8:return t.abrupt("return",e.rows[0]);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{});case 15:case"end":return t.stop()}}),t,this,[[0,11]])})))).apply(this,arguments)}function G(){return B.apply(this,arguments)}function B(){return(B=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:500,scope:"dappservices",table:"package"});case 3:return t.abrupt("return",(e=t.sent)&&e.rows&&e.rows.length?e.rows:[]);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})))).apply(this,arguments)}function D(t){return K.apply(this,arguments)}function K(){return(K=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappairhodl1",json:!0,limit:1,scope:e,table:"accounts"});case 3:return t.abrupt("return",(r=t.sent)&&r.rows&&r.rows.length?r.rows[0]:{});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))).apply(this,arguments)}function j(t){return U.apply(this,arguments)}function U(){return(U=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:1,scope:e,table:"accounts"});case 3:return t.abrupt("return",(r=t.sent)&&r.rows&&r.rows.length?r.rows[0]:{});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))).apply(this,arguments)}function H(t){return Y.apply(this,arguments)}function Y(){return(Y=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:100,scope:e,table:"staking"});case 3:return t.abrupt("return",(r=t.sent)&&r.rows&&r.rows.length?r.rows.map((function(t){return t.scope=e,t})):[]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))).apply(this,arguments)}function q(t,e){return V.apply(this,arguments)}function V(){return(V=f(l().mark((function t(e,r){var n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=""),t.prev=1,t.next=4,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:1e3,scope:"dappairhodl1",table:"staking",lower_bound:r});case 4:if(n=t.sent){t.next=7;break}return t.abrupt("return",[]);case 7:if(a=n.rows,!n.more){t.next=14;break}return t.t0=a,t.next=12,this.getDapphodlStakes(e,+a[a.length-1].id+1);case 12:t.t1=t.sent,a=t.t0.concat.call(t.t0,t.t1);case 14:return t.abrupt("return",a.filter((function(t){return t.account===e})).map((function(t){return t.scope="dappairhodl1",t})));case 17:return t.prev=17,t.t2=t.catch(1),t.abrupt("return",[]);case 20:case"end":return t.stop()}}),t,this,[[1,17]])})))).apply(this,arguments)}function z(t){return W.apply(this,arguments)}function W(){return(W=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:100,scope:e,table:"refunds"});case 3:return t.abrupt("return",(r=t.sent)&&r.rows&&r.rows.length?r.rows.map((function(t){return t.scope=e,t})):[]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))).apply(this,arguments)}function Z(t){return J.apply(this,arguments)}function J(){return(J=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"dappservices",json:!0,limit:1e3,scope:"dappairhodl1",table:"refunds"});case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",[]);case 6:if(n=r.rows,!r.more){t.next=13;break}return t.t0=n,t.next=11,this.getDapphodlUnstakes(e);case 11:t.t1=t.sent,n=t.t0.concat.call(t.t0,t.t1);case 13:return t.abrupt("return",n.filter((function(t){return t.account===e})).map((function(t){return t.scope="dappairhodl1",t})));case 16:return t.prev=16,t.t2=t.catch(0),t.abrupt("return",[]);case 19:case"end":return t.stop()}}),t,this,[[0,16]])})))).apply(this,arguments)}var X,Q=function(){var t=f(l().mark((function t(r){var n,a,s,i,u,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.path,a=r.method,s=r.body,i=r.headers,t.prev=1,t.next=4,o(n,{method:a,body:s,headers:i||{"Content-Type":"application/json"}});case 4:return c=t.sent,t.next=7,c.json();case 7:u=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:if(c&&c.ok){t.next=15;break}throw new e.RpcError(u||"Error");case 15:return t.abrupt("return",u);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q({path:e,method:"GET",headers:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),tt=function(){var t=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q({path:e,method:"POST",body:JSON.stringify(r)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function et(t){return rt.apply(this,arguments)}function rt(){return(rt=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:"fio.address",scope:"fio.address",lower_bound:s.encodeName(e,!1),upper_bound:s.encodeName(e,!1),table:"accountmap",limit:1});case 3:return t.abrupt("return",(r=t.sent.rows).length?r[0].clientkey:void 0);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function nt(t){return at.apply(this,arguments)}function at(){return(at=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,lower_bound:s.encodeName(e,!1),upper_bound:s.encodeName(e,!1),table:"voters",key_type:"i64",index_position:3,limit:1});case 3:return t.abrupt("return",(r=t.sent.rows).length?r[0]:void 0);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function st(t){return ot.apply(this,arguments)}function ot(){return(ot=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=this.rpc,t.next=4,s.string_to_uint128_hash(e);case 4:return t.t1=t.sent,t.t2="0x"+t.t1,t.t3={code:"fio.address",scope:"fio.address",table:"fionames",lower_bound:t.t2,limit:1,key_type:"i128",index_position:5},t.next=9,t.t0.get_table_rows.call(t.t0,t.t3);case 9:if(!(r=t.sent.rows)||!r.length||r[0].name!==e){t.next=15;break}return t.abrupt("return",r[0]);case 15:return t.abrupt("return",void 0);case 16:t.next=22;break;case 18:return t.prev=18,t.t4=t.catch(0),console.log(t.t4),t.abrupt("return",void 0);case 22:case"end":return t.stop()}}),t,this,[[0,18]])})))).apply(this,arguments)}function it(t){return ut.apply(this,arguments)}function ut(){return(ut=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_nfts_fio_address(e);case 3:if(!(r=t.sent.nfts)||!r.length){t.next=9;break}return t.abrupt("return",r);case 9:return t.abrupt("return",[]);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})))).apply(this,arguments)}function ct(t){return pt.apply(this,arguments)}function pt(){return(pt=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=this.rpc,t.next=4,s.string_to_uint128_hash(e);case 4:return t.t1=t.sent,t.t2="0x"+t.t1,t.t3={code:"fio.address",scope:"fio.address",table:"domains",lower_bound:t.t2,limit:1,key_type:"i128",index_position:4},t.next=9,t.t0.get_table_rows.call(t.t0,t.t3);case 9:if(!(r=t.sent.rows)||!r.length||r[0].name!==e){t.next=15;break}return t.abrupt("return",r[0]);case 15:return t.abrupt("return",void 0);case 16:t.next=22;break;case 18:return t.prev=18,t.t4=t.catch(0),console.log(t.t4),t.abrupt("return",void 0);case 22:case"end":return t.stop()}}),t,this,[[0,18]])})))).apply(this,arguments)}function lt(t,e){return ht.apply(this,arguments)}function ht(){return(ht=f(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=-1),t.prev=1,t.next=4,this.rpc.get_table_rows({code:"fio.address",scope:"fio.address",table:"domains",reverse:!0,upper_bound:r,limit:e});case 4:if(!(n=t.sent.rows)||!n.length){t.next=10;break}return t.abrupt("return",n);case 10:return t.abrupt("return",[]);case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})))).apply(this,arguments)}function ft(t,e){return dt.apply(this,arguments)}function dt(){return(dt=f(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=-1),t.prev=1,t.next=4,this.rpc.get_table_rows({code:"fio.address",scope:"fio.address",table:"fionames",reverse:!0,upper_bound:r,limit:e});case 4:if(!(n=t.sent.rows)||!n.length){t.next=10;break}return t.abrupt("return",n);case 10:return t.abrupt("return",[]);case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,this,[[1,13]])})))).apply(this,arguments)}function vt(t){return gt.apply(this,arguments)}function gt(){return(gt=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"producers",reverse:!0,limit:e});case 3:if(!(r=t.sent.rows)||!r.length){t.next=9;break}return t.abrupt("return",r);case 9:return t.abrupt("return",[]);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})))).apply(this,arguments)}function yt(t){return xt.apply(this,arguments)}function xt(){return(xt=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.fetch("/v1/chain/get_fio_balance",{fio_public_key:e});case 3:if(!(r=t.sent)){t.next=8;break}return t.abrupt("return",r);case 8:return t.abrupt("return",null);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this,[[0,11]])})))).apply(this,arguments)}function bt(){return kt.apply(this,arguments)}function kt(){return(kt=f(l().mark((function t(){var e,r,n,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:"fio.token",scope:"FIO",table:"stat"});case 2:return e=+t.sent.rows[0].supply.split(" ")[0],t.next=6,this.rpc.get_table_rows({code:"fio.treasury",scope:"fio.treasury",table:"bprewards"});case 6:return r=t.sent.rows[0].rewards/Math.pow(10,this.constants.CORE_PRECISION),t.next=10,this.rpc.get_table_rows({code:"fio.treasury",scope:"fio.treasury",table:"bpbucketpool"});case 10:return n=t.sent.rows[0].rewards/Math.pow(10,this.constants.CORE_PRECISION),a=r+n,t.next=15,this.get("https://fioprotocol.io/circulating");case 15:return t.abrupt("return",{supply:e,totalLocked:e-+(s=t.sent),bpRewards:r,bpBucket:n,totalBp:a,circulating:s});case 18:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function mt(){return wt.apply(this,arguments)}function wt(){return(wt=f(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.rpc.get_table_rows({code:"fio.fee",scope:"fio.fee",table:"fiofees",limit:-1}).then((function(t){return t.rows})).catch((function(t){return[]})));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _t(t,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=f(l().mark((function t(e,r){var n,a,s,o,i,u,c=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"eosio::deleteauth":"auth_delete","eosio::linkauth":"auth_link","eosio::regproducer":"register_producer","eosio::regproxy":"register_proxy","eosio::unregprod":"unregister_producer","eosio::unregproxy":"unregister_proxy","eosio::updateauth":"auth_update","eosio::voteproducer":"vote_producer","eosio::voteproxy":"proxy_vote","fio.token::trnsfiopubky":"transfer_tokens_pub_key","fio.address::addaddress":"add_pub_address","fio.address::regaddress":"register_fio_address","fio.address::regdomain":"register_fio_domain","fio.address::renewaddress":"renew_fio_address","fio.address::renewdomain":"renew_fio_domain","fio.address::setdomainpub":"set_fio_domain_public","eosio.msig::approve":"msig_approve","eosio.msig::cancel":"msig_cancel","eosio.msig::exec":"msig_exec","eosio.msig::invalidate":"msig_invalidate","eosio.msig::propose":"msig_propose","eosio.msig::unapprove":"msig_approve","fio.reqobt::newfundsreq":"new_funds_request","fio.reqobt::rejectfndreq":"reject_funds_request","fio.reqobt::cancelfndreq":"cancelfndreq","fio.reqobt::recordobt":"record_obt_data","fio.reqobt::newpubaddreq":"new_pub_address_request","fio.reqobt::relpubadd":"release_pub_address","fio.reqobt::rejectaddreq":"reject_pub_address_request","fio.reqobt::canceladdreq":"cancel_pub_address_request","fio.lock::trnsloctoks":"transfer_locked_tokens","fio.lock::locktokens":"lock_tokens","fio.address::remaddress":"remove_pub_address","fio.address::remalladdr":"remove_all_pub_addresses","fio.address::burnaddress":"burn_fio_address","fio.address::xferdomain":"transfer_fio_domain","fio.address::xferaddress":"transfer_fio_address"},t.next=3,this.getFIOFees();case 3:a=t.sent,s=[],o=l().mark((function t(){var e,o,i,p,h,f,d,v;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.value,t.next=3,c.api.getCachedAbi(e.account);case 3:if(i=(o=t.sent.abi).structs,!(p=o.actions.find((function(t){return t.name===e.name})))){t.next=23;break}if(!(h=i.find((function(t){return t.name===p.type})))){t.next=23;break}if(h.fields.find((function(t){return"max_fee"===t.name}))&&void 0===e.data.max_fee&&(f=n[e.account+"::"+e.name])&&(d=a.find((function(t){return t.end_point===f})),e.data.max_fee=d?d.suf_amount:0),h.fields.find((function(t){return"actor"===t.name}))&&void 0===e.data.actor&&(e.data.actor=r),h.fields.find((function(t){return"tpid"===t.name}))&&void 0===e.data.tpid&&(e.data.tpid=c.constants.FIO_FEES_ACCOUNT),!h.fields.find((function(t){return"fio_address"===t.name}))||void 0!==e.data.fio_address){t.next=23;break}return t.next=21,c.getFIOAddresses(r);case 21:(v=t.sent).length&&(e.data.fio_address=v[0].name);case 23:s.push(e);case 24:case"end":return t.stop()}}),t)})),i=g(e);case 7:if((u=i()).done){t.next=11;break}return t.delegateYield(o(),"t0",9);case 9:t.next=7;break;case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function St(t){return this.rpc.get_table_rows({code:"fio.address",scope:"fio.address",table:"fionames",key_type:"i64",limit:-1,lower_bound:s.encodeName(t,!1),upper_bound:new i.BigNumber(s.encodeName(t,!1)).plus(1).toString(),index_position:4}).then((function(e){return e.rows.length>0?e.rows.filter((function(e){return e.owner_account===t})):[]})).catch((function(t){return[]}))}function At(t){return Et.apply(this,arguments)}function Et(){return(Et=f(l().mark((function t(e){var r,n,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.fetch("/v1/chain/get_fio_domains",{fio_public_key:e});case 3:for(n=g(r=t.sent.fio_domains);!(a=n()).done;)(s=a.value).name=s.fio_domain;return t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})))).apply(this,arguments)}function It(t){return tt(this.constants.DEFAULT_ENDPOINTS[0]+"/v1/get_fio_names",{fio_public_key:t})}function Tt(){return Nt.apply(this,arguments)}function Nt(){return(Nt=f(l().mark((function t(){var e,r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.constants.HISTORY_TYPES.includes("dfuse")){t.next=9;break}return t.next=3,this.get(s.urlBuilder(this.constants.API_URL,"dfuse",{type:"state_scope_pipeline",account:this.constants.EOSIO_MSIG,table:this.constants.EOSIO_MSIG_PROPOSALS_TABLE,options:{}}));case 3:return e=(e=t.sent.tables).map((function(t){return t.rows=t.rows.sort((function(t,e){return e.block-t.block})),t.highestBlock=t.rows[0].block,t})).sort((function(t,e){return e.highestBlock-t.highestBlock})),t.abrupt("return",e);case 9:r=[],n="";case 11:return t.next=13,this.rpc.get_table_by_scope({json:!0,code:"eosio.msig",limit:100,lower_bound:n,table:"proposal",upper_bound:""});case 13:n=(a=t.sent).more,r=r.concat(a.rows);case 16:if(n){t.next=11;break}case 17:return t.abrupt("return",r.map((function(t){return{scope:t.scope,rows:Array(t.count).fill({key:""})}})));case 18:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Pt(t,e){return Rt.apply(this,arguments)}function Rt(){return(Rt=f(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({json:!0,code:"eosio.msig",scope:e,limit:1,lower_bound:r,table:"proposal"});case 2:if(!(n=t.sent.rows)||!n.length||n[0].proposal_name!==r){t.next=8;break}return t.abrupt("return",n[0]);case 8:return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Lt(t){return Mt.apply(this,arguments)}function Mt(){return(Mt=f(l().mark((function t(e){var r,n,a,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=g(e);case 2:if((a=n()).done){t.next=15;break}if((o=a.value).account!==this.constants.EOSIO_MSIG||"propose"!==o.name){t.next=8;break}return t.next=7,this.api.deserializeActionsSync(o.data.trx.actions);case 7:o.data.trx.actions=t.sent;case 8:if(o.account!==this.constants.EOSIO||"setabi"!==o.name){t.next=12;break}return t.next=11,this.api.rawAbiToJson(s.hexToUint8Array(o.data.abi));case 11:o.data.abi=t.sent;case 12:r.push(o);case 13:t.next=2;break;case 15:return r=r.map((function(t){return{action_trace:{act:t}}})),t.abrupt("return",r);case 17:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ct(t){return Ft.apply(this,arguments)}function Ft(){return(Ft=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.deserializeTransactionWithActions(e);case 3:return r=t.sent,t.next=6,this.parsePackedMsigActions(r.actions);case 6:return r.actions=t.sent,t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(0),console.log("Error parsing packed msig"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})))).apply(this,arguments)}function Gt(t,e){return Bt.apply(this,arguments)}function Bt(){return(Bt=f(l().mark((function t(e,r){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO_MSIG,scope:s.encodeName(e,!1),table:this.constants.EOSIO_MSIG_PROPOSALS_TABLE,table_key:"",key_type:"name",lower_bound:r,index_position:1,limit:1});case 3:if(!((n=t.sent)&&n.rows&&n.rows.length)){t.next=8;break}return t.next=7,this.parsePackedMsig(n.rows[0].packed_transaction);case 7:return t.abrupt("return",t.sent);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})))).apply(this,arguments)}function Dt(t,e){return Kt.apply(this,arguments)}function Kt(){return(Kt=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO_MSIG,scope:s.encodeName(e,!1),table:r,limit:-1});case 3:return t.abrupt("return",t.sent.rows);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function jt(t){return Ut.apply(this,arguments)}function Ut(){return(Ut=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=[this.getMsigApprovals(e,this.constants.EOSIO_MSIG_APPROVALS_TABLE)],"approvals2"===this.constants.EOSIO_MSIG_APPROVALS_TABLE&&r.push(this.getMsigApprovals(e,"approvals")),t.next=5,Promise.all(r);case 5:return t.abrupt("return",(n=t.sent)[0].concat(n[1]));case 11:return t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,this,[[0,11]])})))).apply(this,arguments)}function Ht(t){return Yt.apply(this,arguments)}function Yt(){return(Yt=f(l().mark((function t(e){var r,n,a,s,o,i,u,c,p;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hyperion){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.next=4,this.hyperion.get_proposals(e);case 4:if(!((r=t.sent)&&r.proposals&&r.proposals.length)){t.next=22;break}return s=r.proposals[0],t.next=9,Promise.all([this.hyperion.get_actions(this.constants.EOSIO_MSIG,{block_num:s.block_num,limit:1}),this.hyperion.get_deltas(this.constants.EOSIO_MSIG,e.proposer,"proposal",void 0,{block_num:s.block_num})]);case 9:if(u=(o=t.sent)[1],(i=o[0])&&i.actions&&i.actions.length&&(c=i.actions.find((function(t){return t.act.data.proposal_name===e.proposal})))&&(n={payer:c.act.data.executer||c.act.data.canceler,trx_id:c.trx_id,published_at:c.timestamp,cancelled:"cancel"===c.act.name}),!(u&&u.deltas&&u.deltas.length)){t.next=19;break}return p=u.deltas[0].data.transaction,t.next=17,this.parsePackedMsigActions(p.actions);case 17:p.actions=t.sent,a=p;case 19:return t.abrupt("return",{approvals:s,transaction:a,executionTransaction:n});case 22:return t.abrupt("return",void 0);case 23:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function qt(t){return Vt.apply(this,arguments)}function Vt(){return(Vt=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,lower_bound:s.encodeName(e,!1),upper_bound:s.encodeName(e,!1),table:"voters",limit:1});case 3:return t.abrupt("return",(r=t.sent.rows).length?r[0]:void 0);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function zt(){return Wt.apply(this,arguments)}function Wt(){return(Wt=f(l().mark((function t(){var e=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.constants.ALOHA_PROXY_URL){t.next=8;break}return t.next=3,this.get(this.constants.ALOHA_PROXY_URL+"?output=json");case 3:return t.abrupt("return",t.sent.proxies);case 8:return t.next=10,this.hyperion.get_voters({proxy:!0,limit:1e3});case 10:return t.abrupt("return",t.sent.voters.map((function(t,r){return d({},t,{weight:t.weight/Math.pow(10,e.constants.CORE_PRECISION),rank:r+1})})));case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Zt(t){return Jt.apply(this,arguments)}function Jt(){return(Jt=f(l().mark((function t(e){var r,n,a=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hyperion){t.next=9;break}return t.next=3,this.hyperion.get_voters({producer:e,limit:100});case 3:return r=t.sent.voters,n=this.calculateVoteWeight(),t.abrupt("return",r.map((function(t){return d({},t,{vote:a.weightedVoteToNumber(t.weight,n)})})));case 9:return t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Xt(){var t="wax"===this.constants.CHAIN?13:52,e=Date.now()/1e3-946684800,r=Math.floor(e/604800)/t;return Math.pow(2,r)}function Qt(t,e){return e||(e=this.calculateVoteWeight()),+t/e/Math.pow(10,this.constants.CORE_PRECISION)}function $t(t){return te.apply(this,arguments)}function te(){return(te=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.constants.ALOHA_PROXY_URL){t.next=8;break}return t.next=3,this.get(this.constants.ALOHA_PROXY_URL+"/"+e+"?output=json");case 3:return t.abrupt("return",t.sent.proxy);case 8:return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ee(){return re.apply(this,arguments)}function re(){return(re=f(l().mark((function t(){var e,r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=[],n=null,a=null;case 4:return t.next=6,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"producers",lower_bound:a,index_position:1,key_type:"i64",limit:100});case 6:e=(n=t.sent).more,r=r.concat(n.rows),a=new i.BigNumber(s.encodeName(r[r.length-1].owner,!1)).plus(1).toString();case 10:if(e){t.next=4;break}case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ne(t,e,r){return ae.apply(this,arguments)}function ae(){return(ae=f(l().mark((function t(e,r,n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=1),void 0===r&&(r=50),void 0===n&&(n=!1),""===this.constants.API_URL||n){t.next=9;break}return t.next=6,this.get(s.urlBuilder(this.constants.API_URL,"producers",{pageNum:e,perPage:r}));case 6:return t.abrupt("return",t.sent);case 9:return t.abrupt("return",this.getProducersLocal());case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function se(){return oe.apply(this,arguments)}function oe(){return(oe=f(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"global",limit:1});case 2:return t.abrupt("return",t.sent.rows[0]);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}(X=exports.KycStatus||(exports.KycStatus={})).FAILED="FAILED",X.UNSUBMITTED="UNSUBMITTED",X.PENDING="PENDING",X.PASSED="PASSED";var ie=[{key:"AF",value:"AF",flag:"af",text:"Afghanistan"},{key:"AX",value:"AX",flag:"ax",text:"Aland Islands"},{key:"AL",value:"AL",flag:"al",text:"Albania"},{key:"DZ",value:"DZ",flag:"dz",text:"Algeria"},{key:"AS",value:"AS",flag:"as",text:"American Samoa"},{key:"AD",value:"AD",flag:"ad",text:"Andorra"},{key:"AO",value:"AO",flag:"ao",text:"Angola"},{key:"AI",value:"AI",flag:"ai",text:"Anguilla"},{key:"AG",value:"AG",flag:"ag",text:"Antigua"},{key:"AR",value:"AR",flag:"ar",text:"Argentina"},{key:"AM",value:"AM",flag:"am",text:"Armenia"},{key:"AW",value:"AW",flag:"aw",text:"Aruba"},{key:"AU",value:"AU",flag:"au",text:"Australia"},{key:"AT",value:"AT",flag:"at",text:"Austria"},{key:"AZ",value:"AZ",flag:"az",text:"Azerbaijan"},{key:"BS",value:"BS",flag:"bs",text:"Bahamas"},{key:"BH",value:"BH",flag:"bh",text:"Bahrain"},{key:"BD",value:"BD",flag:"bd",text:"Bangladesh"},{key:"BB",value:"BB",flag:"bb",text:"Barbados"},{key:"BY",value:"BY",flag:"by",text:"Belarus"},{key:"BE",value:"BE",flag:"be",text:"Belgium"},{key:"BZ",value:"BZ",flag:"bz",text:"Belize"},{key:"BJ",value:"BJ",flag:"bj",text:"Benin"},{key:"BM",value:"BM",flag:"bm",text:"Bermuda"},{key:"BT",value:"BT",flag:"bt",text:"Bhutan"},{key:"BO",value:"BO",flag:"bo",text:"Bolivia"},{key:"BA",value:"BA",flag:"ba",text:"Bosnia"},{key:"BW",value:"BW",flag:"bw",text:"Botswana"},{key:"BV",value:"BV",flag:"bv",text:"Bouvet Island"},{key:"BR",value:"BR",flag:"br",text:"Brazil"},{key:"VG",value:"VG",flag:"vg",text:"British Virgin Islands"},{key:"BN",value:"BN",flag:"bn",text:"Brunei"},{key:"BG",value:"BG",flag:"bg",text:"Bulgaria"},{key:"BF",value:"BF",flag:"bf",text:"Burkina Faso"},{key:"BI",value:"BI",flag:"bi",text:"Burundi"},{key:"TC",value:"TC",flag:"tc",text:"Caicos Islands"},{key:"KH",value:"KH",flag:"kh",text:"Cambodia"},{key:"CM",value:"CM",flag:"cm",text:"Cameroon"},{key:"CA",value:"CA",flag:"ca",text:"Canada"},{key:"CV",value:"CV",flag:"cv",text:"Cape Verde"},{key:"KY",value:"KY",flag:"ky",text:"Cayman Islands"},{key:"CF",value:"CF",flag:"cf",text:"Central African Republic"},{key:"TD",value:"TD",flag:"td",text:"Chad"},{key:"CL",value:"CL",flag:"cl",text:"Chile"},{key:"CN",value:"CN",flag:"cn",text:"China"},{key:"CX",value:"CX",flag:"cx",text:"Christmas Island"},{key:"CC",value:"CC",flag:"cc",text:"Cocos Islands"},{key:"CO",value:"CO",flag:"co",text:"Colombia"},{key:"KM",value:"KM",flag:"km",text:"Comoros"},{key:"CG",value:"CG",flag:"cg",text:"Congo Brazzaville"},{key:"CD",value:"CD",flag:"cd",text:"Congo"},{key:"CK",value:"CK",flag:"ck",text:"Cook Islands"},{key:"CR",value:"CR",flag:"cr",text:"Costa Rica"},{key:"CI",value:"CI",flag:"ci",text:"Cote Divoire"},{key:"HR",value:"HR",flag:"hr",text:"Croatia"},{key:"CU",value:"CU",flag:"cu",text:"Cuba"},{key:"CY",value:"CY",flag:"cy",text:"Cyprus"},{key:"CZ",value:"CZ",flag:"cz",text:"Czech Republic"},{key:"DK",value:"DK",flag:"dk",text:"Denmark"},{key:"DJ",value:"DJ",flag:"dj",text:"Djibouti"},{key:"DM",value:"DM",flag:"dm",text:"Dominica"},{key:"DO",value:"DO",flag:"do",text:"Dominican Republic"},{key:"EC",value:"EC",flag:"ec",text:"Ecuador"},{key:"EG",value:"EG",flag:"eg",text:"Egypt"},{key:"SV",value:"SV",flag:"sv",text:"El Salvador"},{key:"GB",value:"GB",flag:"gb",text:"England"},{key:"GQ",value:"GQ",flag:"gq",text:"Equatorial Guinea"},{key:"ER",value:"ER",flag:"er",text:"Eritrea"},{key:"EE",value:"EE",flag:"ee",text:"Estonia"},{key:"ET",value:"ET",flag:"et",text:"Ethiopia"},{key:"EU",value:"EU",flag:"eu",text:"European Union"},{key:"FK",value:"FK",flag:"fk",text:"Falkland Islands"},{key:"FO",value:"FO",flag:"fo",text:"Faroe Islands"},{key:"FJ",value:"FJ",flag:"fj",text:"Fiji"},{key:"FI",value:"FI",flag:"fi",text:"Finland"},{key:"FR",value:"FR",flag:"fr",text:"France"},{key:"GF",value:"GF",flag:"gf",text:"French Guiana"},{key:"PF",value:"PF",flag:"pf",text:"French Polynesia"},{key:"TF",value:"TF",flag:"tf",text:"French Territories"},{key:"GA",value:"GA",flag:"ga",text:"Gabon"},{key:"GM",value:"GM",flag:"gm",text:"Gambia"},{key:"GE",value:"GE",flag:"ge",text:"Georgia"},{key:"DE",value:"DE",flag:"de",text:"Germany"},{key:"GH",value:"GH",flag:"gh",text:"Ghana"},{key:"GI",value:"GI",flag:"gi",text:"Gibraltar"},{key:"GR",value:"GR",flag:"gr",text:"Greece"},{key:"GL",value:"GL",flag:"gl",text:"Greenland"},{key:"GD",value:"GD",flag:"gd",text:"Grenada"},{key:"GP",value:"GP",flag:"gp",text:"Guadeloupe"},{key:"GU",value:"GU",flag:"gu",text:"Guam"},{key:"GT",value:"GT",flag:"gt",text:"Guatemala"},{key:"GW",value:"GW",flag:"gw",text:"Guinea-Bissau"},{key:"GN",value:"GN",flag:"gn",text:"Guinea"},{key:"GY",value:"GY",flag:"gy",text:"Guyana"},{key:"HT",value:"HT",flag:"ht",text:"Haiti"},{key:"HM",value:"HM",flag:"hm",text:"Heard Island"},{key:"HN",value:"HN",flag:"hn",text:"Honduras"},{key:"HK",value:"HK",flag:"hk",text:"Hong Kong"},{key:"HU",value:"HU",flag:"hu",text:"Hungary"},{key:"IS",value:"IS",flag:"is",text:"Iceland"},{key:"IN",value:"IN",flag:"in",text:"India"},{key:"IO",value:"IO",flag:"io",text:"Indian Ocean Territory"},{key:"ID",value:"ID",flag:"id",text:"Indonesia"},{key:"IR",value:"IR",flag:"ir",text:"Iran"},{key:"IQ",value:"IQ",flag:"iq",text:"Iraq"},{key:"IE",value:"IE",flag:"ie",text:"Ireland"},{key:"IL",value:"IL",flag:"il",text:"Israel"},{key:"IT",value:"IT",flag:"it",text:"Italy"},{key:"JM",value:"JM",flag:"jm",text:"Jamaica"},{key:"JP",value:"JP",flag:"jp",text:"Japan"},{key:"JO",value:"JO",flag:"jo",text:"Jordan"},{key:"KZ",value:"KZ",flag:"kz",text:"Kazakhstan"},{key:"KE",value:"KE",flag:"ke",text:"Kenya"},{key:"KI",value:"KI",flag:"ki",text:"Kiribati"},{key:"KW",value:"KW",flag:"kw",text:"Kuwait"},{key:"KG",value:"KG",flag:"kg",text:"Kyrgyzstan"},{key:"LA",value:"LA",flag:"la",text:"Laos"},{key:"LV",value:"LV",flag:"lv",text:"Latvia"},{key:"LB",value:"LB",flag:"lb",text:"Lebanon"},{key:"LS",value:"LS",flag:"ls",text:"Lesotho"},{key:"LR",value:"LR",flag:"lr",text:"Liberia"},{key:"LY",value:"LY",flag:"ly",text:"Libya"},{key:"LI",value:"LI",flag:"li",text:"Liechtenstein"},{key:"LT",value:"LT",flag:"lt",text:"Lithuania"},{key:"LU",value:"LU",flag:"lu",text:"Luxembourg"},{key:"MO",value:"MO",flag:"mo",text:"Macau"},{key:"MK",value:"MK",flag:"mk",text:"Macedonia"},{key:"MG",value:"MG",flag:"mg",text:"Madagascar"},{key:"MW",value:"MW",flag:"mw",text:"Malawi"},{key:"MY",value:"MY",flag:"my",text:"Malaysia"},{key:"MV",value:"MV",flag:"mv",text:"Maldives"},{key:"ML",value:"ML",flag:"ml",text:"Mali"},{key:"MT",value:"MT",flag:"mt",text:"Malta"},{key:"MH",value:"MH",flag:"mh",text:"Marshall Islands"},{key:"MQ",value:"MQ",flag:"mq",text:"Martinique"},{key:"MR",value:"MR",flag:"mr",text:"Mauritania"},{key:"MU",value:"MU",flag:"mu",text:"Mauritius"},{key:"YT",value:"YT",flag:"yt",text:"Mayotte"},{key:"MX",value:"MX",flag:"mx",text:"Mexico"},{key:"FM",value:"FM",flag:"fm",text:"Micronesia"},{key:"MD",value:"MD",flag:"md",text:"Moldova"},{key:"MC",value:"MC",flag:"mc",text:"Monaco"},{key:"MN",value:"MN",flag:"mn",text:"Mongolia"},{key:"ME",value:"ME",flag:"me",text:"Montenegro"},{key:"MS",value:"MS",flag:"ms",text:"Montserrat"},{key:"MA",value:"MA",flag:"ma",text:"Morocco"},{key:"MZ",value:"MZ",flag:"mz",text:"Mozambique"},{key:"NA",value:"NA",flag:"na",text:"Namibia"},{key:"NR",value:"NR",flag:"nr",text:"Nauru"},{key:"NP",value:"NP",flag:"np",text:"Nepal"},{key:"AN",value:"AN",flag:"an",text:"Netherlands Antilles"},{key:"NL",value:"NL",flag:"nl",text:"Netherlands"},{key:"NC",value:"NC",flag:"nc",text:"New Caledonia"},{key:"PG",value:"PG",flag:"pg",text:"New Guinea"},{key:"NZ",value:"NZ",flag:"nz",text:"New Zealand"},{key:"NI",value:"NI",flag:"ni",text:"Nicaragua"},{key:"NE",value:"NE",flag:"ne",text:"Niger"},{key:"NG",value:"NG",flag:"ng",text:"Nigeria"},{key:"NU",value:"NU",flag:"nu",text:"Niue"},{key:"NF",value:"NF",flag:"nf",text:"Norfolk Island"},{key:"KP",value:"KP",flag:"kp",text:"North Korea"},{key:"MP",value:"MP",flag:"mp",text:"Northern Mariana Islands"},{key:"NO",value:"NO",flag:"no",text:"Norway"},{key:"OM",value:"OM",flag:"om",text:"Oman"},{key:"PK",value:"PK",flag:"pk",text:"Pakistan"},{key:"PW",value:"PW",flag:"pw",text:"Palau"},{key:"PS",value:"PS",flag:"ps",text:"Palestine"},{key:"PA",value:"PA",flag:"pa",text:"Panama"},{key:"PY",value:"PY",flag:"py",text:"Paraguay"},{key:"PE",value:"PE",flag:"pe",text:"Peru"},{key:"PH",value:"PH",flag:"ph",text:"Philippines"},{key:"PN",value:"PN",flag:"pn",text:"Pitcairn Islands"},{key:"PL",value:"PL",flag:"pl",text:"Poland"},{key:"PT",value:"PT",flag:"pt",text:"Portugal"},{key:"PR",value:"PR",flag:"pr",text:"Puerto Rico"},{key:"QA",value:"QA",flag:"qa",text:"Qatar"},{key:"RE",value:"RE",flag:"re",text:"Reunion"},{key:"RO",value:"RO",flag:"ro",text:"Romania"},{key:"RU",value:"RU",flag:"ru",text:"Russia"},{key:"RW",value:"RW",flag:"rw",text:"Rwanda"},{key:"SH",value:"SH",flag:"sh",text:"Saint Helena"},{key:"KN",value:"KN",flag:"kn",text:"Saint Kitts and Nevis"},{key:"LC",value:"LC",flag:"lc",text:"Saint Lucia"},{key:"PM",value:"PM",flag:"pm",text:"Saint Pierre"},{key:"VC",value:"VC",flag:"vc",text:"Saint Vincent"},{key:"WS",value:"WS",flag:"ws",text:"Samoa"},{key:"SM",value:"SM",flag:"sm",text:"San Marino"},{key:"GS",value:"GS",flag:"gs",text:"Sandwich Islands"},{key:"ST",value:"ST",flag:"st",text:"Sao Tome"},{key:"SA",value:"SA",flag:"sa",text:"Saudi Arabia"},{key:"SN",value:"SN",flag:"sn",text:"Senegal"},{key:"CS",value:"CS",flag:"cs",text:"Serbia"},{key:"RS",value:"RS",flag:"rs",text:"Serbia"},{key:"SC",value:"SC",flag:"sc",text:"Seychelles"},{key:"SL",value:"SL",flag:"sl",text:"Sierra Leone"},{key:"SG",value:"SG",flag:"sg",text:"Singapore"},{key:"SK",value:"SK",flag:"sk",text:"Slovakia"},{key:"SI",value:"SI",flag:"si",text:"Slovenia"},{key:"SB",value:"SB",flag:"sb",text:"Solomon Islands"},{key:"SO",value:"SO",flag:"so",text:"Somalia"},{key:"ZA",value:"ZA",flag:"za",text:"South Africa"},{key:"KR",value:"KR",flag:"kr",text:"South Korea"},{key:"ES",value:"ES",flag:"es",text:"Spain"},{key:"LK",value:"LK",flag:"lk",text:"Sri Lanka"},{key:"SD",value:"SD",flag:"sd",text:"Sudan"},{key:"SR",value:"SR",flag:"sr",text:"Suriname"},{key:"SJ",value:"SJ",flag:"sj",text:"Svalbard"},{key:"SZ",value:"SZ",flag:"sz",text:"Swaziland"},{key:"SE",value:"SE",flag:"se",text:"Sweden"},{key:"CH",value:"CH",flag:"ch",text:"Switzerland"},{key:"SY",value:"SY",flag:"sy",text:"Syria"},{key:"TW",value:"TW",flag:"tw",text:"Taiwan"},{key:"TJ",value:"TJ",flag:"tj",text:"Tajikistan"},{key:"TZ",value:"TZ",flag:"tz",text:"Tanzania"},{key:"TH",value:"TH",flag:"th",text:"Thailand"},{key:"TL",value:"TL",flag:"tl",text:"Timorleste"},{key:"TG",value:"TG",flag:"tg",text:"Togo"},{key:"TK",value:"TK",flag:"tk",text:"Tokelau"},{key:"TO",value:"TO",flag:"to",text:"Tonga"},{key:"TT",value:"TT",flag:"tt",text:"Trinidad"},{key:"TN",value:"TN",flag:"tn",text:"Tunisia"},{key:"TR",value:"TR",flag:"tr",text:"Turkey"},{key:"TM",value:"TM",flag:"tm",text:"Turkmenistan"},{key:"TV",value:"TV",flag:"tv",text:"Tuvalu"},{key:"UG",value:"UG",flag:"ug",text:"Uganda"},{key:"UA",value:"UA",flag:"ua",text:"Ukraine"},{key:"AE",value:"AE",flag:"ae",text:"United Arab Emirates"},{key:"US",value:"US",flag:"us",text:"United States"},{key:"UY",value:"UY",flag:"uy",text:"Uruguay"},{key:"UM",value:"UM",flag:"um",text:"Us Minor Islands"},{key:"VI",value:"VI",flag:"vi",text:"Us Virgin Islands"},{key:"UZ",value:"UZ",flag:"uz",text:"Uzbekistan"},{key:"VU",value:"VU",flag:"vu",text:"Vanuatu"},{key:"VA",value:"VA",flag:"va",text:"Vatican City"},{key:"VE",value:"VE",flag:"ve",text:"Venezuela"},{key:"VN",value:"VN",flag:"vn",text:"Vietnam"},{key:"WF",value:"WF",flag:"wf",text:"Wallis and Futuna"},{key:"EH",value:"EH",flag:"eh",text:"Western Sahara"},{key:"YE",value:"YE",flag:"ye",text:"Yemen"},{key:"ZM",value:"ZM",flag:"zm",text:"Zambia"},{key:"ZW",value:"ZW",flag:"zw",text:"Zimbabwe"}];function ue(t){return ce.apply(this,arguments)}function ce(){return(ce=f(l().mark((function t(e){var r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.constants.BLOKS_API+"/"+(r=e.chain)+"/kyc?type=countries&chain="+r,t.next=4,this.get(n);case 4:return a=t.sent.content.reduce((function(t,e){return t[e.id]=e,t}),{}),t.abrupt("return",ie.filter((function(t){return a[t.key]})));case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function pe(t){return le.apply(this,arguments)}function le(){return(le=f(l().mark((function t(e){var r,n,a,s=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.actor,a=e.expectedTier,(r=e.chain)&&n&&a){t.next=3;break}throw new Error("Invalid parameters");case 3:return t.abrupt("return",new Promise(function(){var t=f(l().mark((function t(e,o){var i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=function(){var t=f(l().mark((function t(){var u,c,p,h,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.rpc.isLightKYCVerified(n);case 2:if(!(u=t.sent[0])||!u.isLightKYCVerified){t.next=6;break}return t.abrupt("return",e(exports.KycStatus.PASSED));case 6:return c=s.constants.BLOKS_API+"/"+r+"/kyc?type=status&chain="+r+"&actor="+n,t.next=9,s.get(c);case 9:if((p=t.sent)&&p.length){t.next=12;break}return t.abrupt("return",o(new Error("Could not fetch KYC record")));case 12:if(h=p.find((function(t){return t.tier===String(a)}))){t.next=15;break}return t.abrupt("return",o(new Error("No kyc data matching tier found")));case 15:if(f=h.status,h.status){t.next=18;break}return t.abrupt("return",o(new Error("KYC Status not found")));case 18:if(f!==exports.KycStatus.PENDING){t.next=22;break}setTimeout((function(){return i()}),2e3),t.next=23;break;case 22:return t.abrupt("return",e(f));case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())();case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function he(t){return fe.apply(this,arguments)}function fe(){return(fe=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.BLOKS_API+"/"+e.chain+"/kyc",t.next=3,this.post(r,d({type:"apply"},e));case 3:if(!(n=t.sent)){t.next=8;break}return t.abrupt("return",n);case 8:throw new Error("Could not apply for KYC");case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var de=c.object({chainId:c.string(),explorerUrl:c.string(),explorerName:c.string(),resourceTokenSymbol:c.string(),resourceTokenContract:c.string(),systemTokenSymbol:c.string(),systemTokenContract:c.string(),rpcEndpoints:c.array(c.string()),actionsRpcEndpoints:c.array(c.string()),hyperionEndpoints:c.array(c.string()),lightEndpoints:c.array(c.string())});function ve(){return ge.apply(this,arguments)}function ge(){return(ge=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="proton-test"===this.constants.CHAIN?"https://raw.githubusercontent.com/ProtonProtocol/chain-info/main/testnet.json":"https://raw.githubusercontent.com/ProtonProtocol/chain-info/main/mainnet.json",t.prev=1,t.next=4,this.get(e,{});case 4:return t.abrupt("return",de.parse(t.sent));case 8:return t.prev=8,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[1,8]])})))).apply(this,arguments)}function ye(){return xe.apply(this,arguments)}function xe(){return(xe=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.constants.METAL_PROTON_ENDPOINT+"/v1/chain/exchange-rates/info",t.prev=1,t.next=4,this.get(e);case 4:return t.abrupt("return",u.exchangeRatesParser.parse(t.sent));case 8:throw t.prev=8,t.t0=t.catch(1),new Error("Could not fetch exchange rates");case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))).apply(this,arguments)}function be(t){return ke.apply(this,arguments)}function ke(){return(ke=f(l().mark((function t(e){var r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.currency,n=e.network,a=this.constants.METAL_PROTON_ENDPOINT+"/v1/swaps/calculate-estimated-fee",t.prev=2,t.next=5,this.post(a,{currency:r,network:n});case 5:return t.abrupt("return",u.withdrawalFeeQuoteParser.parse(t.sent));case 9:return t.prev=9,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,this,[[2,9]])})))).apply(this,arguments)}function me(){return we.apply(this,arguments)}function we(){return(we=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.constants.METAL_PROTON_ENDPOINT+"/v1/kyc/ip-info",t.next=3,this.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _e(t){return Oe.apply(this,arguments)}function Oe(){return(Oe=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.constants.METAL_PROTON_ENDPOINT+"/v2/kyc/by-chain-account/"+e+"/available-features",t.next=4,this.get(r);case 4:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{fiat:"FALSE",bridge:"FALSE",swap:"FALSE",loan:"FALSE"});case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function Se(t){return Ae.apply(this,arguments)}function Ae(){return(Ae=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.METAL_PROTON_ENDPOINT+"/v2/users/create",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ee(t){return Ie.apply(this,arguments)}function Ie(){return(Ie=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.METAL_PROTON_ENDPOINT+"/v2/users/login",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Te(t){return Ne.apply(this,arguments)}function Ne(){return(Ne=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.METAL_PROTON_ENDPOINT+"/v3/users/login",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Pe(t){return Re.apply(this,arguments)}function Re(){return(Re=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.SWAP_URL+"/v1/quote/"+e.baseSymbol+"/"+e.baseAmount+"/"+e.quoteSymbol,t.next=3,this.get(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Le(t){return Me.apply(this,arguments)}function Me(){return(Me=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.SWAP_URL+"/v1/order/"+e,t.next=3,this.get(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ce(t){return Fe.apply(this,arguments)}function Fe(){return(Fe=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.WRAP_SERVER_URL+"/address/generate",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ge(t){return Be.apply(this,arguments)}function Be(){return(Be=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.WRAP_SERVER_URL+"/address/delete",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function De(t){return Ke.apply(this,arguments)}function Ke(){return(Ke=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.WRAP_SERVER_URL+"/withdraw",t.next=3,this.post(r,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function je(t){return Ue.apply(this,arguments)}function Ue(){return(Ue=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.constants.WRAP_SERVER_URL+"/withdrawals/"+e,t.next=3,this.get(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function He(){return Ye.apply(this,arguments)}function Ye(){return(Ye=f(l().mark((function t(){var e,r,n,a,s,o,i,u,c,p,h,f,d;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.getTokenSupply(this.constants.EOSIO_TOKEN,this.constants.CORE_SYMBOL),this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"globalsd",limit:1}).then((function(t){return t.rows[0]})),this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"global4",limit:1}).then((function(t){return t.rows[0]}))]);case 3:return c=(i=(o=(a=+(n=(e=t.sent)[2]).continuous_rate*(r=e[0].supply))-(s=a/4))*(1e4/n.inflation_pay_factor))-(u=i*(1e4/n.votepay_factor)),f=(p=o-i)-(h=2*p/3),d=+e[1].totalrstaked/Math.pow(10,this.constants.CORE_PRECISION),t.abrupt("return",{supply:r,yieldFarming:s,producers:i,producersBlock:u,producersVote:c,consortium:f,staking:h,totalStaked:d,apr:h/d*100});case 25:return t.prev=25,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",0);case 29:case"end":return t.stop()}}),t,this,[[0,25]])})))).apply(this,arguments)}function qe(t){return Ve.apply(this,arguments)}function Ve(){return(Ve=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,lower_bound:s.encodeName(e,!1),table:"votersxpr",limit:1});case 3:if(!(r=t.sent.rows)||!r.length||r[0].owner!==e){t.next=9;break}return t.abrupt("return",r[0]);case 9:return t.abrupt("return",void 0);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})))).apply(this,arguments)}function ze(t){return We.apply(this,arguments)}function We(){return(We=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.prev=1,t.next=4,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:s.encodeName(e,!1),table:"delxpr",limit:-1});case 4:(n=t.sent.rows)&&n.length&&(r=n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})))).apply(this,arguments)}function Ze(t){return Je.apply(this,arguments)}function Je(){return(Je=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:s.encodeName(e,!1),table:"refundsxpr",limit:-1});case 3:(n=t.sent.rows)&&n.length&&((r=n[0]).quantity=+r.quantity.split(" ")[0]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function Xe(t){return Qe.apply(this,arguments)}function Qe(){return(Qe=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"oracles",scope:"oracles",table:"data",limit:1,lower_bound:e,upper_bound:e});case 3:if(!(r=t.sent.rows)||!r.length){t.next=9;break}return t.abrupt("return",r[0]);case 9:return t.abrupt("return",void 0);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",void 0);case 16:case"end":return t.stop()}}),t,this,[[0,12]])})))).apply(this,arguments)}function $e(t){return tr.apply(this,arguments)}function tr(){return(tr=f(l().mark((function t(e){var r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=void 0),t.prev=1,t.next=4,this.rpc.get_table_rows({code:"oracles",scope:"oracles",table:"feeds",limit:-1,lower_bound:e});case 4:if(n=(r=t.sent).rows,a=r.next_key,!r.more){t.next=15;break}return t.next=11,this.getAllOracleFeeds(a);case 11:return t.abrupt("return",n.concat(t.sent));case 15:return t.abrupt("return",n);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",[]);case 22:case"end":return t.stop()}}),t,this,[[1,18]])})))).apply(this,arguments)}function er(t){return rr.apply(this,arguments)}function rr(){return(rr=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"oracles",scope:"oracles",table:"data",limit:-1,lower_bound:e,upper_bound:e});case 3:if(!(r=t.sent.rows)||!r.length||r[0].feed_index!==e){t.next=7;break}return t.abrupt("return",r[0]);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:return t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})))).apply(this,arguments)}function nr(t){return ar.apply(this,arguments)}function ar(){return(ar=f(l().mark((function t(e){var r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:"oracles",scope:"oracles",table:"data",limit:-1,lower_bound:e});case 3:if(n=(r=t.sent).rows,a=r.next_key,!r.more){t.next=13;break}return t.t0=n,t.next=11,this.getAllOracleData(a);case 11:t.t1=t.sent,n=t.t0.concat.call(t.t0,t.t1);case 13:return t.abrupt("return",n);case 16:return t.prev=16,t.t2=t.catch(0),console.log(t.t2),t.abrupt("return",[]);case 20:case"end":return t.stop()}}),t,this,[[0,16]])})))).apply(this,arguments)}function sr(t,e){return or.apply(this,arguments)}function or(){return(or=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r=10),-1===this.constants.CHAIN.indexOf("proton")){t.next=12;break}return t.prev=2,t.next=5,this.rpc.get_table_rows({json:!0,code:"eosio.proton",scope:"eosio.proton",table:"usersinfo",table_key:"",key_type:"i64",lower_bound:s.encodeName(e,!1),index_position:1,limit:r});case 5:return t.abrupt("return",t.sent.rows);case 9:t.prev=9,t.t0=t.catch(2),console.log("getProtonAvatar error",t.t0);case 12:return t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[2,9]])})))).apply(this,arguments)}function ir(t){return ur.apply(this,arguments)}function ur(){return(ur=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===this.constants.CHAIN.indexOf("proton")){t.next=11;break}return t.prev=1,t.next=4,this.rpc.get_table_rows({json:!0,code:"eosio.proton",scope:"eosio.proton",table:"usersinfo",table_key:"",key_type:"i64",lower_bound:s.encodeName(e,!1),index_position:1,limit:1});case 4:return t.abrupt("return",(r=t.sent).rows.length>0&&r.rows[0].acc===e?r.rows[0]:void 0);case 8:t.prev=8,t.t0=t.catch(1),console.log("getProtonAvatar error",t.t0);case 11:return t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[1,8]])})))).apply(this,arguments)}function cr(){return pr.apply(this,arguments)}function pr(){return(pr=f(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:0,table:"powup.state",limit:1});case 2:return t.abrupt("return",t.sent.rows[0]);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function lr(t,e){return hr.apply(this,arguments)}function hr(){return(hr=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:s.encodeName(e,!1),table:"delband",table_key:"",limit:-1,lower_bound:r,key_type:"i64",index_position:1}));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function fr(t){return dr.apply(this,arguments)}function dr(){return(dr=f(l().mark((function t(e){var r,n,a,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,n=[],a=null,o="",t.prev=4;case 5:return t.next=7,this.delegatedBandwidth(e,o);case 7:r=(a=t.sent).more,n=n.concat(a.rows),r&&(o=new i.BigNumber(s.encodeName(n[n.length-1].to,!1)).plus(1).toString());case 11:if(r){t.next=5;break}case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,this,[[4,14]])})))).apply(this,arguments)}function vr(t){return gr.apply(this,arguments)}function gr(){return(gr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:s.encodeName(e,!1),table:"userres",table_key:"",limit:1});case 2:return t.abrupt("return",t.sent.rows[0]);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function yr(){return xr.apply(this,arguments)}function xr(){return(xr=f(l().mark((function t(){var e,r,n,a,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"rammarket",table_key:"",limit:10});case 3:return n=+(r=(e=t.sent).rows[0].base.balance).substr(0,r.indexOf(" ")),s=(a=e.rows[0].quote.balance).substr(0,a.indexOf(" ")),o=1024*Number((s/n).toFixed(8)),t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:return t.abrupt("return",0);case 17:case"end":return t.stop()}}),t,this,[[0,13]])})))).apply(this,arguments)}function br(t){return kr.apply(this,arguments)}function kr(){return(kr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=500),t.abrupt("return",this.lightApi.get_topstake(e));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function mr(t){return wr.apply(this,arguments)}function wr(){return(wr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=500),t.abrupt("return",this.lightApi.get_topram(e));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _r(t,e){return Or.apply(this,arguments)}function Or(){return(Or=f(l().mark((function t(e,r){var n,a,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=""),void 0===r&&(r=""),t.next=4,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"namebids",key_type:"i64",lower_bound:e&&e.length<=12?s.encodeName(e,!0):e,upper_bound:r&&r.length<=12?s.encodeName(r,!0):r,index_position:1,limit:-1});case 4:if(a=(n=t.sent).rows,o=n.next_key,!n.more){t.next=14;break}return t.t0=a,t.next=12,this.getCurrentNameBids(o,r);case 12:t.t1=t.sent,a=t.t0.concat.call(t.t0,t.t1);case 14:return t.abrupt("return",a);case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var Sr={jungle:"jungle",bos:"bos",eos:"mainnet",telos:"telos"};function Ar(t){return Er.apply(this,arguments)}function Er(){return(Er=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"rexqueue",limit:1,lower_bound:s.encodeName(e,!1)});case 3:if(!(r=t.sent.rows)||!r.length||r[0].owner!==e){t.next=7;break}return t.abrupt("return",r[0]);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:return t.abrupt("return",void 0);case 13:case"end":return t.stop()}}),t,this,[[0,9]])})))).apply(this,arguments)}function Ir(){return Tr.apply(this,arguments)}function Tr(){return(Tr=f(l().mark((function t(){var e,r,n,a,s,o,i,u,c,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"rexpool"});case 2:return n=(r=function(t){return Number(t.split(" ")[0])})((e=t.sent.rows[0]).total_lent),a=r(e.total_lendable),s=r(e.total_unlent),o=r(e.total_rex),i=r(e.total_rent),u=p.multiply(p.divide(n,a),100),c=+p.divide(a,o),h=+p.divide(s,i+1),t.abrupt("return",{version:e.version,namebid_proceeds:r(e.namebid_proceeds),loan_num:e.loan_num,total_lent:n,total_unlent:s,total_rent:i,total_lendable:a,total_rex:o,lent_percent:u,rex_price:c,resource_price:h});case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Nr(t){return Pr.apply(this,arguments)}function Pr(){return(Pr=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"rexbal",lower_bound:s.encodeName(e,!1)});case 2:return t.abrupt("return",(r=t.sent.rows[0]).owner===e?r:void 0);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Rr(t){return Lr.apply(this,arguments)}function Lr(){return(Lr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"cpuloan",table_key:"byowner",key_type:"i64",limit:100,lower_bound:s.encodeName(e,!1),index_position:3});case 2:return t.abrupt("return",t.sent.rows.filter((function(t){return t.from===e})));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Mr(t){return Cr.apply(this,arguments)}function Cr(){return(Cr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({json:!0,code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"netloan",table_key:"byowner",key_type:"i64",limit:100,lower_bound:s.encodeName(e,!1),index_position:3});case 2:return t.abrupt("return",t.sent.rows.filter((function(t){return t.from===e})));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Fr(t){return Gr.apply(this,arguments)}function Gr(){return(Gr=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_table_rows({code:this.constants.EOSIO,scope:this.constants.EOSIO,table:"rexfund",lower_bound:s.encodeName(e,!1)});case 2:return t.abrupt("return",(r=t.sent.rows[0]).owner===e?Number(r.balance.split(" ")[0]):0);case 6:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Br(t){return Dr.apply(this,arguments)}function Dr(){return(Dr=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e="mpr"),!(r=Sr[this.constants.CHAIN])){t.next=14;break}return t.next=5,this.post("https://www.api.bloks.io/graphql/v1alpha1/graphql",{query:"query {\n        "+r+"_"+e+" {\n          "+e+"\n        }\n      }",variables:null});case 5:if(!(n=t.sent.data)){t.next=11;break}return t.abrupt("return",Math.abs(n[r+"_"+e][0][e]));case 11:return t.abrupt("return",0);case 12:t.next=15;break;case 14:return t.abrupt("return",0);case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Kr(){return jr.apply(this,arguments)}function jr(){return(jr=f(l().mark((function t(){var e,r,n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Sr[this.constants.CHAIN])){t.next=15;break}return r=p.formatDate(p.utcTime()),n=p.formatDate(p.utcTime(p.startDate(p.time(),7))),t.next=6,this.post("https://www.api.bloks.io/graphql/v1alpha1/graphql",{query:"query {\n        "+e+'_pricechart(args: {\n          from_time: "'+n+'",\n          to_time: "'+r+'"\n        }) {\n          t\n          o\n          h\n          l\n          c\n        }\n      }',variables:null});case 6:if(!(a=t.sent.data)){t.next=12;break}return t.abrupt("return",a[e+"_pricechart"]);case 12:return t.abrupt("return",[]);case 13:t.next=16;break;case 15:return t.abrupt("return",{actions:[]});case 16:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Ur(t){return Hr.apply(this,arguments)}function Hr(){return(Hr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_currency_balance(this.constants.EOSIO_TOKEN,e,this.constants.CORE_SYMBOL);case 2:return t.abrupt("return",t.sent[0]);case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Yr(t,e,r){return qr.apply(this,arguments)}function qr(){return(qr=f(l().mark((function t(e,r,n){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_currency_balance(e,r,n).catch((function(t){return console.log(t)}));case 2:if(!(a=t.sent)||!a.length){t.next=7;break}return t.abrupt("return",a[0]);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Vr(t){return zr.apply(this,arguments)}function zr(){return(zr=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.lightGetTokens(e);case 3:r=t.sent;case 4:if(r){t.next=8;break}return t.next=7,this.hyperionGetTokensForAccount(e);case 7:r=t.sent;case 8:return t.abrupt("return",r||[]);case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Wr(t){return Zr.apply(this,arguments)}function Zr(){return(Zr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.lightApi.get_balances(e);case 3:return t.abrupt("return",t.sent.balances.map((function(t){return{currency:t.currency,amount:Number(t.amount),contract:t.contract,decimals:Number(t.decimals)}})));case 8:return t.prev=8,t.t0=t.catch(0),console.log("lightGetTokens error",t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function Jr(t){return Xr.apply(this,arguments)}function Xr(){return(Xr=f(l().mark((function t(e){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.hyperion.get_tokens(e);case 3:return t.abrupt("return",t.sent.tokens.map((function(t){return{currency:t.symbol,amount:Number(t.amount),contract:t.contract,decimals:Number(t.precision)}})));case 8:return t.prev=8,t.t0=t.catch(0),console.log("hyperionGetTokensForAccount error",t.t0),t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function Qr(t,e){return $r.apply(this,arguments)}function $r(){return($r=f(l().mark((function t(e,r){var n,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.rpc.get_currency_stats(e,r);case 3:return s=(n=t.sent[r]).max_supply,t.abrupt("return",{supply:(a=n.supply)?+a.split(" ")[0]:0,max_supply:s?+s.split(" ")[0]:0});case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{supply:0,max_supply:0});case 12:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function tn(t,e){return en.apply(this,arguments)}function en(){return(en=f(l().mark((function t(r,n){var a,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=0),a=new e.JsonRpc(this.constants.TRANSACTIONS_ENDPOINTS),t.next=4,a.history_get_transaction(r,n);case 4:if(o=t.sent){t.next=7;break}throw new Error("TX not found");case 7:return t.abrupt("return",s.historyTransformTransaction(o));case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function rn(t){return nn.apply(this,arguments)}function nn(){return(nn=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.rpc.get_scheduled_transactions(!0,e,1);case 2:if(!((r=t.sent.transactions).length>0&&r[0].trx_id.substring(0,6)===e.substring(0,6))){t.next=6;break}return t.abrupt("return",s.historyTransformDeferredTransaction(r[0]));case 6:return t.abrupt("return",{});case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function an(t){return sn.apply(this,arguments)}function sn(){return(sn=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.constants.HYPERION_URL){t.next=6;break}return t.next=3,this.hyperion.get_transaction(e);case 3:r=t.sent,t.next=9;break;case 6:return t.next=8,this.get(s.urlBuilder(this.constants.API_URL,"hyperion",{type:"get_transaction",id:e,options:{}}));case 8:r=t.sent;case 9:if(r&&r.actions&&r.actions.length){t.next=11;break}throw new Error("TX not found");case 11:return t.abrupt("return",s.hyperionTransformTransaction(r));case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function on(t,e,r){return un.apply(this,arguments)}function un(){return(un=f(l().mark((function t(r,n,a){var s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=3e3),void 0===n&&(n=12),void 0===a&&(a=0),t.next=5,this.rpc.get_info();case 5:if(o={},!(s=t.sent)){t.next=12;break}return t.next=10,this.rpc.get_block(s.head_block_num-n);case 10:o=e.Serialize.transactionHeader(t.sent,r);case 12:return t.abrupt("return",d({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:a,context_free_actions:[],actions:[],transaction_extensions:[]},o));case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function cn(t){return this.constants.HISTORY_TYPES.includes("native")?this.actionsRpc.history_get_controlled_accounts(t):this.constants.HISTORY_TYPES.includes("hyperion")?new e.JsonRpc([this.constants.HYPERION_URL]).history_get_controlled_accounts(t):[]}function pn(t){return ln.apply(this,arguments)}function ln(){return(ln=f(l().mark((function t(e){var r,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.constants.LIGHT_API){t.next=12;break}return t.prev=1,t.next=4,this.getAccountLightData(e);case 4:if(!(r=t.sent)){t.next=7;break}return t.abrupt("return",r.linkauth.map((function(t){return{action:t.type,contract:t.code,permission_name:t.requirement}})));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:if(!this.constants.HISTORY_TYPES.includes("dfuse")){t.next=25;break}return t.prev=13,t.next=16,this.get(this.constants.API_URL+"/dfuse?type=state_permission_links&account="+e);case 16:if(!(n=t.sent.linked_permissions)){t.next=20;break}return t.abrupt("return",n);case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(13),console.log(t.t1);case 25:if(!this.constants.HISTORY_TYPES.includes("hyperion")){t.next=37;break}return t.prev=26,t.next=29,this.hyperion.get_links(e);case 29:return t.abrupt("return",t.sent.links.map((function(t){return{action:t.action,contract:t.code,permission_name:t.permission}})));case 34:t.prev=34,t.t2=t.catch(26),console.log(t.t2);case 37:return console.log("Permission links not available on chain"),t.abrupt("return",[]);case 39:case"end":return t.stop()}}),t,this,[[1,9],[13,22],[26,34]])})))).apply(this,arguments)}function hn(t){return fn.apply(this,arguments)}function fn(){return(fn=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.get(this.constants.API_URL+"/dfuse?type=state_key_accounts&publicKey="+e);case 3:return t.abrupt("return",(r=t.sent.account_names)&&r.length?r:[]);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log("No dfuse accounts found associated with key:",e),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[0,8]])})))).apply(this,arguments)}function dn(t){return vn.apply(this,arguments)}function vn(){return(vn=f(l().mark((function t(r){var n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=[],!["fio","fio-test"].includes(this.constants.CHAIN)){t.next=7;break}a=s.fioKeyToActor(r.replace("EOS","FIO"),e.Numeric.stringToPublicKey),-1===n.indexOf(a)&&n.push(a),t.next=12;break;case 7:return t.next=9,this.rpc.get_accounts_by_authorizers([],[r]);case 9:n=Array.from(new Set(t.sent.accounts.map((function(t){return t.account_name}))));case 12:return t.abrupt("return",n);case 15:throw t.prev=15,t.t0=t.catch(0),console.log(t.t0),t.t0;case 19:case"end":return t.stop()}}),t,this,[[0,15]])})))).apply(this,arguments)}function gn(t){return yn.apply(this,arguments)}function yn(){return(yn=f(l().mark((function t(r){var n,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hyperion){t.next=2;break}throw new Error("Hyperion API not supported");case 2:return n=e.Key.PublicKey.fromString(r).toLegacyString(),t.next=5,this.hyperion.get_key_accounts(n);case 5:if(!(a=t.sent.account_names)||!a.length){t.next=11;break}return t.abrupt("return",a);case 11:throw new Error("No keys found");case 12:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function xn(t){return bn.apply(this,arguments)}function bn(){return(bn=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.lightApi){t.next=2;break}throw new Error("Light API not supported");case 2:return r=this.constants.CHAIN.toLowerCase().replace("-",""),t.next=5,this.lightApi.get_key_accounts(e);case 5:return t.abrupt("return",Array.from(new Set(Object.keys(t.sent[r].accounts))));case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function kn(t,e){return mn.apply(this,arguments)}function mn(){return(mn=f(l().mark((function t(e,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next="dfuse"===t.t0?3:"native"===t.t0?6:"hyperion"===t.t0?9:12;break;case 3:return t.next=5,this.dfuseGetKeyAccounts(e);case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,this.nativeGetKeyAccounts(e);case 8:return t.abrupt("return",t.sent);case 9:return t.next=11,this.hyperionGetKeyAccounts(e);case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,this.lightGetKeyAccounts(e);case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function wn(t){return _n.apply(this,arguments)}function _n(){return(_n=f(l().mark((function t(e){var r,n,a,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.startsWith("FIO")&&(e=e.replace("FIO","EOS")),r=0,n=[this.constants.HISTORY_TYPES[0],"light"].concat(this.constants.HISTORY_TYPES.slice(1));case 2:if(!(r<n.length)){t.next=19;break}return a=n[r],t.prev=4,t.next=7,this.getKeyAccountsByType(e,a);case 7:if(!(s=t.sent)){t.next=10;break}return t.abrupt("return",s);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(4),console.log(t.t0),t.abrupt("continue",16);case 16:r++,t.next=2;break;case 19:return t.abrupt("return",[]);case 20:case"end":return t.stop()}}),t,this,[[4,12]])})))).apply(this,arguments)}function On(t){return Sn.apply(this,arguments)}function Sn(){return(Sn=f(l().mark((function t(e){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.lightApi){t.next=2;break}throw new Error("Light API not supported");case 2:return t.prev=2,t.next=5,this.lightApi.get_all_key_accounts(e);case 5:return r=t.sent.reduce((function(t,e){return d({},t,e)}),{}),t.abrupt("return",Object.entries(r).reduce((function(t,e){var r=e[0],n=Object.keys(e[1].accounts);return n.length&&t.push({chain:r,accounts:n}),t}),[]));case 10:return t.prev=10,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t,this,[[2,10]])})))).apply(this,arguments)}function An(t,e,r,n,a){return En.apply(this,arguments)}function En(){return(En=f(l().mark((function t(e,r,n,a,s){var o,i,u,c,p,h,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[]),void 0===a&&(a=1),void 0===s&&(s=2),t.next=5,this.getAccount(e);case 5:o=g(t.sent.permissions);case 7:if((i=o()).done){t.next=31;break}if((u=i.value).perm_name!==r){t.next=29;break}if(c=[],"eosio"!==e||!["owner","active"].includes(u.perm_name)){t.next=16;break}return t.next=14,this.getProducersLocal();case 14:c=t.sent.map((function(t){return{actor:t.owner,permission:"active"}}));case 16:c.length||(c=u.required_auth.accounts.map((function(t){return t.permission}))),c.length||n.push({actor:e,permission:r}),p=g(c);case 19:if((h=p()).done){t.next=29;break}if(f=h.value,!(a<s)){t.next=26;break}return t.next=24,this.getRequiredAccounts(f.actor,f.permission,n,++a,s);case 24:t.next=27;break;case 26:n.push({actor:f.actor,permission:f.permission});case 27:t.next=19;break;case 29:t.next=7;break;case 31:return t.abrupt("return",n);case 32:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function In(t){return Tn.apply(this,arguments)}function Tn(){return(Tn=f(l().mark((function t(e){var r,n,a=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],n=e.map(function(){var t=f(l().mark((function t(e){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getKeyAccounts(e);case 2:return n=t.sent.map(function(){var t=f(l().mark((function t(n){var s,o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getAccount(n);case 2:for(s=g(t.sent.permissions);!(o=s()).done;)(i=o.value).required_auth.keys.find((function(t){return t.key===e}))&&r.push({actor:n,permission:i.perm_name,publicKey:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=6,Promise.all(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=4,Promise.all(n);case 4:return t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.ApiClass=function(){function t(t){this.rpc=void 0,this.actionsRpc=void 0,this.api=void 0,this.hyperion=void 0,this.lightApi=void 0,this.isInitialized=!1,this.constants=void 0,this.http=Q,this.get=$,this.post=tt,this.getAccount=y,this.getGravatar=m,this.searchAccount=b,this.getParent=_,this.getAccountLightData=S,this.getActionsFromNative=E,this.getActions=T,this.getActionsFromDfuse=P,this.getActionsFromHyperion=L,this.getDappStats=C,this.getDspPackages=G,this.getDapphodlBalance=D,this.getDappBalance=j,this.getDappStakes=H,this.getDapphodlStakes=q,this.getDappUnstakes=z,this.getDapphodlUnstakes=Z,this.getFIOVoter=nt,this.getFIOPublicKey=et,this.getFIOAddressByName=st,this.getFIODomainByName=ct,this.getNFTsByFioAddress=it,this.getDomains=lt,this.getAddresses=ft,this.getFIOProducers=vt,this.getFIOSupplyBreakdown=bt,this.getFIOFees=mt,this.addFIOFeeToActions=_t,this.getFIOAddresses=St,this.getFIODomains=At,this.getFIOAddressesAndDomains=It,this.getFIOBalance=yt,this.getControlledAccounts=cn,this.getPermissionLinks=pn,this.dfuseGetKeyAccounts=hn,this.nativeGetKeyAccounts=dn,this.hyperionGetKeyAccounts=gn,this.lightGetKeyAccounts=xn,this.getKeyAccountsByType=kn,this.getKeyAccounts=wn,this.getKeyAccountsForAllChains=On,this.getRequiredAccounts=An,this.getUsersFromKeys=In,this.getAllMsigs=Tt,this.parsePackedMsigActions=Lt,this.parsePackedMsig=Ct,this.getFullMsigProposal=Gt,this.getMsigApprovals=Dt,this.getAccountsMsigProposals=jt,this.hyperionGetMsig=Ht,this.getMsigProposal=Pt,this.getRentbwState=cr,this.delegatedBandwidth=lr,this.getAccountDelegatedBandwidth=fr,this.getAccountResources=vr,this.getRamPriceInEos=yr,this.getRexQueued=Ar,this.getRexPool=Ir,this.getRexBalance=Nr,this.getRexCpuLoans=Rr,this.getRexNetLoans=Mr,this.getEosDepositedIntoRex=Fr,this.getRexReturnRate=Br,this.getRexPriceChart=Kr,this.getEosTopStakes=br,this.getEosTopRams=mr,this.getCurrentNameBids=_r,this.getEosBalance=Ur,this.getTokenBalance=Yr,this.hyperionGetTokensForAccount=Jr,this.getTokenSupply=Qr,this.lightGetTokens=Wr,this.getAccountTokens=Vr,this.getHistoryTransaction=tn,this.getDeferredTransaction=rn,this.getHyperionTransaction=an,this.generateTransactionSettings=on,this.getProxies=zt,this.getVoters=Zt,this.calculateVoteWeight=Xt,this.weightedVoteToNumber=Qt,this.getProxyData=$t,this.getVoter=qt,this.getProducers=ne,this.getProducersLocal=ee,this.getChainTable=se,this.fetchKycCountries=ue,this.checkUserKycStatus=pe,this.applyForKyc=he,this.currentLocation=me,this.getAvailableFeatures=_e,this.otcQuote=Pe,this.otcOrder=Le,this.generateAddress=Ce,this.deleteAddress=Ge,this.withdrawMetal=De,this.withdrawalHistoryMetal=je,this.getTokenPrices=ye,this.getWithdrawalFee=be,this.getChainInfo=ve,this.createAccount=Se,this.loginAccount=Ee,this.loginAccountV3=Te,this.getXprTotalStakedAndApr=He,this.getXprVoter=qe,this.getXprAccountStakes=ze,this.getXprAccountRefund=Ze,this.getXprOracleData=Xe,this.getAllOracleFeeds=$e,this.getAllOracleData=nr,this.getSpecificOracleData=er,this.getProtonAvatar=ir,this.getProtonAvatars=sr,t&&(r.constants.initialize(t),this.initialize(r.constants))}return t.prototype.initialize=function(t,r){var s=void 0===r?{}:r,o=s.rpcEndpoints,i=s.actionsRpcEndpoints,u=s.lightEndpoint,c=s.hyperionEndpoint;this.constants=t,this.rpc=new e.JsonRpc(o||this.constants.DEFAULT_ENDPOINTS),this.actionsRpc=new e.JsonRpc(i||this.constants.ACTIONS_ENDPOINTS),this.api=new e.Api({rpc:this.rpc});var p=u||this.constants.LIGHT_API;p&&(this.lightApi=new a.JsonRpc(this.constants.CHAIN.toLowerCase().replace("-",""),{endpoint:p}));var l=c||this.constants.HYPERION_URL;l&&(this.hyperion=new n.JsonRpc(l)),this.isInitialized=!0},t}();
//# sourceMappingURL=api.cjs.production.min.js.map
